<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fetching Data from API Endpoint</title>
    <script type="text/javascript">
        // using JS fetch API
        // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch


        function randNumRange(min, max) {
            var rn = Math.round(Math.random() * (max - min) + min)
            // test = rn
            // return a value from our function
            return rn
        }

        const randomIndex = randNumRange(0, 110)

        // we need to flag this function as asynchronous
        // whenever we use the await flag within the function
        async function logApiResults() {
            // send in API url in the fetch 
            // think of await as a "Dear JS, IOU a response, it isn't instant"
            // we know it's a Promise, but pls wait for the result of that Promise before assigning to response, so don't move on until we have a proper result

            const response = await fetch(`https://rickandmortyapi.com/api/character/${randomIndex}`)
            
            // JS is trying to read ASAP - but we're tryna ping a server somewhere and return a JSON/character response - it's not instant tho eventho it's fast - must use AWAIT keyword - js don't assign response a value UNTIL we get the value back from the fetch URL, don't console log anything until u get an actual response, when use await must flag function as ASYNC

            // console.log(response) // get a Promise // now we get a Response with await/async

            // turn JSON to JS object 
            const result = await response.json()
            console.log(result) // gives the actual JS object
            // try to output using template literal
            const message = `${result.name} is a ${result.species} from ${result.origin.name}, and they are ${result.status}`
            console.log(message)
            // return result
        }

        async function logApiQuote() {
            const response = await fetch('https://api.quotable.io/quotes/random')
            
            const result = await response.json()
            // console.log(result) 

            const message = `${result[0].content} by ${result[0].author}`
            console.log(message)
        }

        async function logApiUser() {
            const response = await fetch('https://randomuser.me/api/')
            
            const result = await response.json()
            // console.log(result) 

            const message = `${result.results[0].name.title} ${result.results[0].name.first} ${result.results[0].name.last} with username: ${result.results[0].login.username}, has a mailing address at ${result.results[0].location.country}`
            console.log(message)
        }

        // x matter who's called first what matters is who's the fastest to return
        
        logApiQuote()
        logApiUser()
        logApiResults()

        // not doing this today
        // const notGonnaWork = logApiResults()
        // console.log(notGonnaWork)

        // THERE'S A HINT FOR THURSDAY TEASER CODE - PULL GIT - there's a 
        // .then, .catch clause
        const myApiResult = {

        }
    </script>
  </head>
  <body></body>
</html>
